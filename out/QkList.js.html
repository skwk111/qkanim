<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: QkList.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: QkList.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// @ts-check
/**
 * @file QkList.js
 * @since v1.0.0
 * @version v1.0.0
 */

/**
 * リストアニメーション実装クラス
 */
export class QkList {

    /**
     * qk-listから始まるクラス名要素
     * @type {Element}
     */
    element;

    /**
     * アクティブ時に付与するクラス名
     * @type {string} in-view
     */
    activeAddClassName = 'in-view';

    /**
     * 子要素のアクティブ時に付与するクラス名
     * @type {string} qk-list-anim-begin
     */
    childActiveAddClassName = 'qk-list-anim-begin';

    /**
     * 子要素配列
     * @type {HTMLCollection}
     */
    childElementList;

    /**
     * @param {Element} element - qk-listから始まるクラス名の要素
     */
    constructor(element) {

        this.element = element;

        // 子要素がない場合、終了
        if (!this.element.firstElementChild) return;

        // qk-listの最初の子要素のliにqk-list-anim-beginクラスを付与
        this.element.firstElementChild.classList.add('qk-list-anim-begin');

        // 子要素のHTMLコレクションを保存
        this.childElementList = this.element.children;
    }

    /**
     * 初期化処理
     */
    init = () => {
        /**
         * --qk-list-durの取得
         * @type {string}
         */
        const list_dur_str = getComputedStyle(this.element).getPropertyValue('--qk-list-dur');

        /**
         * --qk-list-durからミリ秒の数値に変換
         * @type {number}
         */
        const DURATION_MIN = this.listDurStrToNumber(list_dur_str);


        // CSSで設定されている秒数から繰り返す秒数で繰り返す
        setInterval(this.nextElementAddClass, DURATION_MIN)
    }

    /**
     * アクティブ(qk-list-anim-begin)クラス位置を弟要素に付与
     * @returns void
     */
    nextElementAddClass = () => {
        // 画面内にない場合、処理終了
        if (!this.element.classList.contains(this.activeAddClassName)) return;

        /**
         * HTMLCollectionからElement[]の配列に変換
         */
        const children_list = [...this.childElementList];

        // 子要素のアニメーションを実行
        for (let children of children_list) {
            // クラスリストを取得
            const classList = children.classList;

            // クラスがある場合のみ処理開始
            if (!classList.contains(this.childActiveAddClassName)) continue;

            classList.remove(this.childActiveAddClassName);
            const nextChild = children.nextElementSibling;
            nextChild ? nextChild.classList.add(this.childActiveAddClassName) : children_list[0].classList.add(this.childActiveAddClassName);

            return;
        }
    }

    /**
     * --qk-list-durからミリ秒の数値に変換
     * @param {string} list_dur_str 
     */
    listDurStrToNumber = (list_dur_str) => {
        return Number(list_dur_str.replace("s", "")) * 1000;
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="QkList.html">QkList</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sat Apr 15 2023 03:28:44 GMT+0900 (日本標準時)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
